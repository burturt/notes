3. Enumerating SMB

### With metasploit
`msfconsole` to start up metasploit
- `search SEARCHTERM` like `search SMB`
- Find exploit/auxillery/whatever and then `use [PATH OR #]`
	- SMB specific: `auxiliary/scanner/smb/smb_version` is useful
- Type `info` for more info
- Type `options` to see options only
	- `RHOST(S)` = target address
		- No S, only one host, with S, can sweep range with CIDR
- Set option with `set OPTION VALUE`
- `run`!
- 
### smbclient
- Connect to SMB, check for anonymous access enabled
- `smbclient -L \\\\IP\\`
	- Lists fileshares
	- If you get "Protocol negotiation failed: NT_STATUS_IO_TIMEOUT", do following:
		```
		On Kali, edit /etc/samba/smb.conf
		Add the following under global:
		client min protocol = CORE
		client max protocol = SMB3
		```
- `smbclient \\\\IP\\SHARE$`
	- `smbclient \\\\192.168.161.192\\ADMIN$`
	- Tries to connect